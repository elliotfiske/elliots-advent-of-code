---
id: gr84q
name: Day 12 time
file_version: 1.0.2
app_version: 0.7.1-1
file_blobs:
  src/2021/day12.ts: 3ca090332b038f92ff153a7d056e83b24fedccd5
---

[https://adventofcode.com/2021/day/12](https://adventofcode.com/2021/day/12)

# Part 1

Day 12 of Advent of Code is another Graph problem.

Given a map of connected caves like:

<br/>

<div align="center"><img src="https://firebasestorage.googleapis.com/v0/b/swimmio-content/o/repositories%2FZ2l0aHViJTNBJTNBZWxsaW90cy1hZHZlbnQtb2YtY29kZSUzQSUzQWVsbGlvdGZpc2tl%2F4a9e72c1-fa20-456d-a752-c69dad693e66.png?alt=media&token=814361fb-e71f-481d-a6bb-5e6d5ad85c5d" style="width:'50%'"/></div>

<br/>

Find the number of paths from Start -> end.

CAPITAL caves can be visited any number of times on your journey.

lowercase caves can only be visited once.

For the minimal example above, the viable paths are:

Start -> a -> B -> end

Start -> a -> B -> b -> c -> end

Start -> A -> b -> B -> end

Start -> A -> b -> c -> end

I didn't do a good job with the example because none of the BIG caves are visited more than once. Oh well.

<br/>

Use a vanilla JS object, `nodeMap`[<sup id="qrHkh">â†“</sup>](#f-qrHkh) , to access the nodes.

Key is the name of the `MapNode`[<sup id="1QJuDD">â†“</sup>](#f-1QJuDD) value is that `MapNode`[<sup id="1QJuDD">â†“</sup>](#f-1QJuDD) .
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/2021/day12.ts
```typescript
â¬œ 1      import _ = require("lodash");
â¬œ 2      
ðŸŸ© 3      interface MapNode {
ðŸŸ© 4        neighbors: MapNode[];
ðŸŸ© 5        name: string;
ðŸŸ© 6      }
ðŸŸ© 7      
ðŸŸ© 8      const nodeMap: Record<string, MapNode> = {};
â¬œ 9      
â¬œ 10     function numPaths(
â¬œ 11       seenSmallCaves: Record<string, number>,
```

<br/>

I used a recursive algorithm to calculate the number of paths!

<br/>

Iterate through my `neighbors`[<sup id="12a9oD">â†“</sup>](#f-12a9oD) , ignoring small caves that have already been visited.

Add up all the viable paths to the end that they have.

Base case is when we find the end and can just return 1.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/2021/day12.ts
```typescript
â¬œ 33         }
â¬œ 34       }
â¬œ 35     
ðŸŸ© 36       let result = 0;
ðŸŸ© 37     
ðŸŸ© 38       for (let ndx = 0; ndx < root.neighbors.length; ndx++) {
ðŸŸ© 39         const n = root.neighbors[ndx];
ðŸŸ© 40     
ðŸŸ© 41         if (
ðŸŸ© 42           (seenSmallCaves[n.name] === undefined || seenSmallCaves[n.name] === 1) &&
ðŸŸ© 43           n.name !== "start"
ðŸŸ© 44         ) {
ðŸŸ© 45           result += numPaths(
ðŸŸ© 46             _.clone(seenSmallCaves),
ðŸŸ© 47             n,
ðŸŸ© 48             path + " " + root.name,
ðŸŸ© 49             depth + 1
ðŸŸ© 50           );
ðŸŸ© 51         }
ðŸŸ© 52       }
ðŸŸ© 53     
ðŸŸ© 54       return result;
ðŸŸ© 55     }
â¬œ 56     
â¬œ 57     function part1(lines: Array<string>) {
â¬œ 58       for (let i = 0; i < lines.length; i++) {
```

<br/>

<!-- THIS IS AN AUTOGENERATED SECTION. DO NOT EDIT THIS SECTION DIRECTLY -->
### Swimm Note

<span id="f-1QJuDD">MapNode</span>[^](#1QJuDD) - "src/2021/day12.ts" L3
```typescript
interface MapNode {
```

<span id="f-12a9oD">neighbors</span>[^](#12a9oD) - "src/2021/day12.ts" L38
```typescript
  for (let ndx = 0; ndx < root.neighbors.length; ndx++) {
```

<span id="f-qrHkh">nodeMap</span>[^](#qrHkh) - "src/2021/day12.ts" L8
```typescript
const nodeMap: Record<string, MapNode> = {};
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBZWxsaW90cy1hZHZlbnQtb2YtY29kZSUzQSUzQWVsbGlvdGZpc2tl/docs/gr84q).